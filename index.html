<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Sockets - Login</title>
    <link rel="shortcut icon" href="http://127.0.0.1/FreeSockets/images/favicon.ico">
    <link rel="stylesheet" href="http://127.0.0.1/FreeSockets/css/style.css?v=0.01">
</head>

<body role="login">
  <main class="container" role="main">
    <header class="container">
        <div id="logo">
          <img src="http://127.0.0.1/FreeSockets/images/logo_01.png" style="width:360px; height: 157px;" alt="logo" />
        </div>
    </header>

    <div id="login" class="container">
        <form id="login_form" action="">
            <input id="login_fullname" name="register[fullname]" type="text" placeholder="Full Name" required />
            <input id="login_password" name="register[password]" type="password" placeholder="Password" required />
            <input id="login_submit"   name="register[submit]"   type="submit" value="CHAT" />
        </form>
    </div>
	<div id="logged">
	</div>
  </main>

  <footer class="container">
    <p id="slogen">Chat with anybody anytime</p>
    <p id="credit">Developed by George Qubty and Gil Nimer</p>
  </footer>
  
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
	<script src="http://127.0.0.1/RuddyJS/ruddy.js"></script>
    <script>
		var socket = io('46.121.212.107:3000');
		$r('#login_form').on('submit', function() {
			socket.emit('authentication', {fullname: $r('#login_fullname').e.value.toLowerCase(), password: $r('#login_password').e.value});
			$r('#login_fullname').e.value = '';
			$r('#login_password').e.value = '';
			this.e.preventDefault();
		});

		socket.on('authenticated', function(data){
			$r('#logged').html(data.fullname);
		});

		socket.on('error', function(data){
			$r('#logged').html(data);
		});
    </script>
</body>
</html>
